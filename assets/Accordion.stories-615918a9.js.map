{"version":3,"file":"Accordion.stories-615918a9.js","sources":["../../../../packages/react/src/components/Accordion/icons/chevron-up.tsx","../../../../packages/react/src/components/Accordion/icons/chevron-down.tsx","../../../../packages/react/src/components/Accordion/Accordion.tsx","../../../../packages/react/src/components/Accordion/AccordionList/AccordionList.tsx","../../../../packages/react/src/components/Accordion/stories/icons/magnifier.tsx","../../../../packages/react/src/components/Accordion/stories/icons/x-mark.tsx"],"sourcesContent":["const chevronUp = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n    <path d=\"M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z\" />\n  </svg>\n);\n\nexport default chevronUp;\n","const chevronDown = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n    <path d=\"M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z\" />\n  </svg>\n);\n\nexport default chevronDown;\n","import { FC, forwardRef, memo, useCallback, useMemo, useState, KeyboardEvent } from 'react';\nimport cn from 'classnames';\n\nimport { AccordionProps } from './AccordionTypes';\nimport chevronUp from './icons/chevron-up';\nimport chevronDown from './icons/chevron-down';\n\nconst RCN = 'thuiAccordion';\n\nexport const Accordion: FC<AccordionProps> = memo(\n  forwardRef<HTMLDivElement, AccordionProps>(\n    (\n      {\n        className,\n        title,\n        isExpanded,\n        defaultExpanded,\n        disabled = false,\n        onChange,\n        iconExpanded = chevronUp,\n        iconCollapsed = chevronDown,\n        children,\n        renderHeaderContent = (expanded: boolean) => (\n          <>\n            <div>{title}</div>\n            <div className={cn(`${RCN}__headerIcon`, [disabled && `${RCN}__headerIcon--disabled`])}>\n              {expanded ? iconExpanded : iconCollapsed}\n            </div>\n          </>\n        )\n      },\n      ref\n    ) => {\n      const accordionCnString = cn(RCN, className);\n\n      const [localExpanded, setLocalExpanded] = useState(defaultExpanded ?? false);\n\n      const isUncontrolled = isExpanded === undefined;\n\n      const expanded = useMemo(\n        () => (!isUncontrolled ? isExpanded : localExpanded),\n        [isUncontrolled, isExpanded, localExpanded]\n      );\n\n      const handleExpand = useCallback(() => {\n        isUncontrolled && setLocalExpanded(!expanded);\n        onChange?.(!expanded);\n      }, [isUncontrolled, expanded, onChange]);\n\n      const handleKeyDown = useCallback(\n        (event: KeyboardEvent) => {\n          if (disabled) return;\n\n          if (event.key === 'Enter' || event.key === ' ') {\n            event.preventDefault();\n            handleExpand();\n          }\n        },\n        [disabled, handleExpand]\n      );\n\n      return (\n        <div ref={ref} className={accordionCnString}>\n          <div\n            role=\"heading\"\n            aria-expanded={expanded}\n            className={cn(\n              `${RCN}__header`,\n              expanded && `${RCN}__header--expanded`,\n              disabled && `${RCN}__header--disabled`\n            )}\n          >\n            <div\n              role=\"button\"\n              tabIndex={disabled ? -1 : 0}\n              onClick={handleExpand}\n              onKeyDown={handleKeyDown}\n              className={`${RCN}__headerButton`}\n              aria-disabled={disabled}\n            >\n              {renderHeaderContent(expanded)}\n            </div>\n          </div>\n          <div className={cn(`${RCN}__content`, expanded && `${RCN}__content--expanded`)}>\n            <div className={`${RCN}__contentInner`}>{children}</div>\n          </div>\n        </div>\n      );\n    }\n  )\n);\n","import React, { FC, forwardRef, memo, useCallback, useRef } from 'react';\nimport cn from 'classnames';\n\nimport { AccordionListProps } from '../AccordionTypes';\n\nconst RCN = 'thuiAccordionList';\n\nexport const AccordionList: FC<AccordionListProps> = memo(\n  forwardRef<HTMLDivElement, AccordionListProps>(({ className, children }, ref) => {\n    const accordionListCnString = cn(RCN, className);\n\n    const accordionItemListRef = useRef<HTMLDivElement | null>(null);\n\n    // TODO: find an easier way to navigate through nested elements\n    const findPreviousItem = (currentFocus: Element): HTMLElement | null => {\n      let prev;\n\n      const list = accordionItemListRef.current;\n\n      if (!list) return null;\n\n      if (currentFocus?.parentElement?.parentElement === list.firstElementChild) {\n        prev = list.lastElementChild?.firstElementChild?.firstElementChild;\n      } else {\n        prev = currentFocus?.parentElement?.parentElement?.previousElementSibling?.firstElementChild?.firstElementChild;\n      }\n\n      if (prev?.ariaDisabled === 'true') {\n        return findPreviousItem(prev);\n      } else {\n        return prev ? (prev as HTMLElement) : null;\n      }\n    };\n\n    const findNextItem = (currentFocus: Element): HTMLElement | null => {\n      let next;\n\n      const list = accordionItemListRef.current;\n\n      if (!list) return null;\n\n      if (currentFocus.parentElement?.parentElement === list.lastElementChild) {\n        next = list.firstElementChild?.firstElementChild?.firstElementChild;\n      } else {\n        next = currentFocus?.parentElement?.parentElement?.nextElementSibling?.firstElementChild?.firstElementChild;\n      }\n\n      if (next?.ariaDisabled === 'true') {\n        return findNextItem(next);\n      } else {\n        return next ? (next as HTMLElement) : null;\n      }\n    };\n\n    // handle keyboard navigation\n    const handleKeyDown = (event: React.KeyboardEvent) => {\n      if (event.key === 'ArrowUp' || event.key === 'ArrowDown') {\n        event.preventDefault();\n\n        const currentFocus = document.activeElement;\n        const list = accordionItemListRef.current;\n        const role = currentFocus?.getAttribute('role');\n\n        if (!currentFocus || role !== 'button' || !list?.contains(currentFocus)) {\n          return null;\n        }\n\n        switch (event.key) {\n          case 'ArrowUp': {\n            findPreviousItem(currentFocus)?.focus();\n            break;\n          }\n          case 'ArrowDown': {\n            findNextItem(currentFocus)?.focus();\n            break;\n          }\n          default:\n            break;\n        }\n      }\n    };\n\n    const setRefHandler = useCallback((node: HTMLDivElement | null) => {\n      accordionItemListRef.current = node;\n\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    }, [ref]);\n\n    return (\n      <div\n        ref={setRefHandler}\n        className={accordionListCnString}\n        onKeyDown={handleKeyDown}\n      >\n        {children}\n      </div>\n    );\n  })\n);\n","const magnifier = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n    <path d=\"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z\" />\n  </svg>\n);\n\nexport default magnifier;\n","const xMark = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 512\">\n    <path d=\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\" />\n  </svg>\n);\n\nexport default xMark;\n"],"names":["chevronUp","jsx","chevronUp$1","chevronDown","chevronDown$1","RCN","Accordion","memo","forwardRef","className","title","isExpanded","defaultExpanded","disabled","onChange","iconExpanded","iconCollapsed","children","renderHeaderContent","expanded","jsxs","Fragment","cn","ref","accordionCnString","localExpanded","setLocalExpanded","useState","isUncontrolled","useMemo","handleExpand","useCallback","handleKeyDown","event","AccordionList","accordionListCnString","accordionItemListRef","useRef","findPreviousItem","currentFocus","prev","list","_a","_c","_b","_g","_f","_e","_d","findNextItem","next","role","setRefHandler","node","magnifier","magnifier$1","xMark","xMark$1"],"mappings":"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"}